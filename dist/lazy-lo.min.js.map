{"version":3,"sources":["lazy-lo.js"],"names":["is_cached","img_url","imgEle","document","createElement","src","complete","width","height","window","addEventListener","WindowPrototype","DocumentPrototype","ElementPrototype","removeEventListener","dispatchEvent","registry","type","listener","target","this","unshift","event","currentTarget","preventDefault","returnValue","stopPropagation","cancelBubble","srcElement","call","attachEvent","register","index","detachEvent","splice","eventObject","fireEvent","Window","prototype","HTMLDocument","Element","lazylo_load","clearInterval","lazylo","intervalObject","lazylo_list_maker","reveal","lazylo_image","view_elements","count","length","offsetParentTop","temp","isNaN","offsetTop","offsetParent","pageYOffset","viewportHeight","innerHeight","offsetParentLeft","offsetLeft","pageXOffset","viewportWidth","innerWidth","getAttribute","onload","setAttribute","elements","querySelectorAll","console","log","push","source_url","setInterval"],"mappings":"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","file":"lazy-lo.min.js","sourcesContent":["!window.addEventListener && (function (WindowPrototype, DocumentPrototype, ElementPrototype, addEventListener, removeEventListener, dispatchEvent, registry) {\n\tWindowPrototype[addEventListener] = DocumentPrototype[addEventListener] = ElementPrototype[addEventListener] = function (type, listener) {\n\t\tvar target = this;\n\n\t\tregistry.unshift([target, type, listener, function (event) {\n\t\t\tevent.currentTarget = target;\n\t\t\tevent.preventDefault = function () { event.returnValue = false };\n\t\t\tevent.stopPropagation = function () { event.cancelBubble = true };\n\t\t\tevent.target = event.srcElement || target;\n\n\t\t\tlistener.call(target, event);\n\t\t}]);\n\n\t\tthis.attachEvent(\"on\" + type, registry[0][3]);\n\t};\n\n\tWindowPrototype[removeEventListener] = DocumentPrototype[removeEventListener] = ElementPrototype[removeEventListener] = function (type, listener) {\n\t\tfor (var index = 0, register; register = registry[index]; ++index) {\n\t\t\tif (register[0] == this && register[1] == type && register[2] == listener) {\n\t\t\t\treturn this.detachEvent(\"on\" + type, registry.splice(index, 1)[0][3]);\n\t\t\t}\n\t\t}\n\t};\n\n\tWindowPrototype[dispatchEvent] = DocumentPrototype[dispatchEvent] = ElementPrototype[dispatchEvent] = function (eventObject) {\n\t\treturn this.fireEvent(\"on\" + eventObject.type, eventObject);\n\t};\n})(Window.prototype, HTMLDocument.prototype, Element.prototype, \"addEventListener\", \"removeEventListener\", \"dispatchEvent\", []);\n\nfunction is_cached(img_url){\n  var imgEle = document.createElement(\"img\");\n  imgEle.src = img_url;\n  return imgEle.complete || (imgEle.width+imgEle.height) > 0;\n}\n\n(function() {\n  var lazylo = {};\n\n  lazylo.lazylo_image = \"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\";\n\n  lazylo.view_elements = [];\n\n  lazylo.reveal = function() {\n    for (var count = 0; count < lazylo.view_elements.length; count++) {\n      var offsetParentTop = 0;\n      var temp = lazylo.view_elements[count];\n\n      do {\n        if (!isNaN(temp.offsetTop)) {\n          offsetParentTop += temp.offsetTop;\n        }\n      } while (temp = temp.offsetParent)\n\n      var pageYOffset = window.pageYOffset;\n      var viewportHeight = window.innerHeight;\n\n      var offsetParentLeft = 0;\n      var temp = lazylo.view_elements[count];\n\n      do {\n        if (!isNaN(temp.offsetLeft)) {\n          offsetParentLeft += temp.offsetLeft;\n        }\n      } while (temp = temp.offsetParent);\n\n      var pageXOffset = window.pageXOffset;\n      var viewportWidth = window.innerWidth;\n\n\n        if (offsetParentTop > pageYOffset && offsetParentTop < pageYOffset + viewportHeight && offsetParentLeft > pageXOffset && offsetParentLeft < pageXOffset + viewportWidth) {\n          lazylo.view_elements[count].src = lazylo.view_elements[count].getAttribute(\"data-lazylo-src\");\n          lazylo.view_elements[count].onload = function() {\n            this.setAttribute(\"data-lazylo-state\", \"loaded\");\n          };\n          lazylo.view_elements.splice(count, 1);\n          count--;\n        }\n\n    }\n  };\n\n  window.addEventListener(\"resize\", lazylo.reveal, false);\n  window.addEventListener(\"scroll\", lazylo.reveal, false);\n\n  lazylo.lazylo_list_maker = function() {\n    var elements = document.querySelectorAll(\"img[data-lazylo][data-lazylo='true']\");\n\n    for (var count = 0; count < elements.length; count++) {\n      if(is_cached(elements[count].src) === false) {\n        console.log(elements[count].src);\n        lazylo.view_elements.push(elements[count]);\n        elements[count].setAttribute(\"data-lazylo\", \"false\");\n\n        var source_url = elements[count].src;\n\n        elements[count].setAttribute(\"data-lazylo-src\", source_url);\n        elements[count].setAttribute(\"data-lazylo-state\", 'waiting');\n\n        elements[count].src = elements[count].getAttribute(\"data-lazylo-placeholder\") || lazylo.lazylo_image;\n      }\n    }\n  };\n\n  lazylo.intervalObject = setInterval(function() {\n    lazylo.lazylo_list_maker();\n  }, 50);\n\n  function lazylo_load() {\n    clearInterval(lazylo.intervalObject);\n    lazylo.lazylo_list_maker();\n    lazylo.reveal();\n  }\n\n  window.addEventListener(\"load\", function() {\n    lazylo_load();\n  }, false);\n\n\n})()\n"],"sourceRoot":"/source/"}